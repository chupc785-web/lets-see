<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f2ff; --neon-red: #ff0055; }
        body { background-color: #050505; font-family: 'VT323', monospace; overflow: hidden; color: #eee; }
        .crt-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.15) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 255, 0, 0.03));
            z-index: 1000; background-size: 100% 4px, 4px 100%; pointer-events: none;
            animation: flicker 0.15s infinite;
        }
        @keyframes flicker { 0% { opacity: 0.98; } 50% { opacity: 1; } 100% { opacity: 0.99; } }
        .glitch {
            text-shadow: 3px 0 0 var(--neon-red), -3px 0 0 var(--neon-blue);
            animation: glitch-anim 2s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { text-shadow: 2px 0 0 var(--neon-red), -2px 0 0 var(--neon-blue); }
            100% { text-shadow: 5px 0 0 var(--neon-red), -5px 0 0 var(--neon-blue); }
        }
        #intro-screen {
            animation: zoomOut 0.5s ease-in forwards;
            animation-delay: 2.8s;
        }
        .glitch-layers { position: relative; }
        .glitch-layers::before, .glitch-layers::after {
            content: attr(data-text);
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; clip: rect(0, 0, 0, 0);
        }
        .glitch-layers::after {
            left: 3px; text-shadow: -2px 0 var(--neon-blue);
            animation: heavy-glitch-1 1.5s infinite linear alternate-reverse;
        }
        .glitch-layers::before {
            left: -3px; text-shadow: 2px 0 var(--neon-red);
            animation: heavy-glitch-2 2s infinite linear alternate-reverse;
        }
        @keyframes heavy-glitch-1 {
            0% { clip: rect(20px, 9999px, 40px, 0); transform: skew(0.5deg); }
            20% { clip: rect(80px, 9999px, 90px, 0); transform: skew(-1deg); }
            40% { clip: rect(10px, 9999px, 30px, 0); transform: skew(2deg); }
            60% { clip: rect(60px, 9999px, 70px, 0); transform: skew(-2deg); }
            80% { clip: rect(40px, 9999px, 50px, 0); transform: skew(1deg); }
            100% { clip: rect(0, 9999px, 100px, 0); transform: skew(0); }
        }
        @keyframes heavy-glitch-2 {
            0% { clip: rect(10px, 9999px, 20px, 0); transform: translateX(5px); }
            25% { clip: rect(40px, 9999px, 50px, 0); transform: translateX(-5px); }
            50% { clip: rect(70px, 9999px, 80px, 0); transform: translateX(2px); }
            75% { clip: rect(20px, 9999px, 30px, 0); transform: translateX(-2px); }
            100% { clip: rect(90px, 9999px, 100px, 0); transform: translateX(0); }
        }
        @keyframes zoomOut {
            0% { opacity: 1; transform: scale(1); filter: brightness(1); }
            50% { opacity: 1; transform: scale(1.1) skew(5deg); filter: brightness(2) contrast(2); }
            100% { opacity: 0; transform: scale(2) skew(20deg); visibility: hidden; }
        }
        .hidden { display: none !important; }
        canvas { cursor: none; touch-action: none; }
        input[type=range] { -webkit-appearance: none; background: #222; height: 8px; border-radius: 5px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; background: var(--neon-blue); cursor: pointer; border-radius: 0; box-shadow: 0 0 10px var(--neon-blue); }
        .signature-mark {
            color: #52525b;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            font-weight: bold;
        }
    </style>
</head>
<body class="flex items-center justify-center h-screen m-0 select-none">
    <div class="crt-overlay"></div>
    <div id="intro-screen" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black text-center">
        <div class="relative">
            <h1 class="glitch-layers italic text-6xl md:text-8xl font-black mb-4 uppercase" data-text="RETRO FIGHT">RETRO FIGHT</h1>
        </div>
        <div class="h-1 w-64 bg-red-600 animate-pulse mb-4 shadow-[0_0_15px_rgba(255,0,0,0.8)]"></div>
        <p class="text-zinc-500 text-2xl tracking-[0.5em] uppercase opacity-80">By Ashmit Khatua</p>
        <div class="absolute bottom-10 left-10 text-xs text-blue-900 font-mono animate-pulse uppercase">Booting ASHMIT_OS // Station 04</div>
    </div>
    <div id="main-menu" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black p-10 text-center">
        <h1 class="glitch italic text-8xl md:text-9xl font-black mb-0 uppercase">AIR HOCKEY</h1>     
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mb-8">
            <button onclick="showSubMenu('Amateur')" class="border-4 border-zinc-800 bg-black text-zinc-300 p-6 text-3xl hover:scale-105 hover:text-cyan-400 hover:border-cyan-500 transition-all">AMATEUR</button>
            <button onclick="showSubMenu('Professional')" class="border-4 border-orange-900/50 bg-black text-orange-500 p-6 text-3xl hover:scale-105 hover:border-orange-400 transition-all">PRO MODE</button>
            <button onclick="showSubMenu('World Class')" class="border-4 border-red-900/50 bg-black text-red-500 p-6 text-3xl hover:scale-105 hover:border-red-400 transition-all">WORLD CLASS</button>
        </div>
        <div class="flex gap-4 mb-12">
            <button onclick="toggleSettings(true)" class="text-2xl text-zinc-500 hover:text-white border-2 border-zinc-800 px-8 py-2 uppercase tracking-widest transition-all">⚙ Settings</button>
            <button onclick="requestSystemExit()" class="text-2xl text-red-900 hover:text-red-500 border-2 border-red-900 px-8 py-2 uppercase tracking-widest transition-all">✖ Exit</button>
        </div>
        <div class="signature-mark text-xl">DEVELOPER: ASHMIT KHATUA </div>
    </div>
    <div id="settings-menu" class="hidden fixed inset-0 z-[60] flex flex-col items-center justify-center bg-black/95 backdrop-blur-md p-10">
        <h2 class="text-6xl text-white mb-10 italic border-b-4 border-blue-500 px-4 uppercase">SYSTEM CONFIG</h2>
        <div class="w-full max-w-md space-y-12 mb-12">
            <div class="flex flex-col items-center gap-4">
                <label class="text-2xl text-blue-400 uppercase tracking-widest">Match Length</label>
                <div class="flex gap-4">
                    <button onclick="setWinLimit(11)" class="limit-btn border-2 border-zinc-700 px-6 py-2 text-2xl hover:bg-zinc-800 transition-all">11</button>
                    <button onclick="setWinLimit(16)" class="limit-btn border-2 border-zinc-700 px-6 py-2 text-2xl hover:bg-zinc-800 transition-all">16</button>
                    <button onclick="setWinLimit(21)" class="limit-btn border-2 border-zinc-700 px-6 py-2 text-2xl hover:bg-zinc-800 transition-all">21</button>
                </div>
            </div>
            <div class="flex flex-col items-center gap-4">
                <label class="text-2xl text-blue-400 uppercase tracking-widest">Volume Intensity</label>
                <input type="range" min="0" max="1" step="0.1" value="0.5" class="w-full" oninput="updateVolume(this.value)">
            </div>
        </div>
        <button onclick="toggleSettings(false)" class="border-4 border-white text-white px-12 py-3 text-2xl hover:bg-white hover:text-black transition-all uppercase mb-10">SAVE & EXIT</button>
        <div class="signature-mark text-sm opacity-50">CONFIGURED BY ASHMIT KHATUA</div>
    </div>
    <div id="sub-menu" class="hidden fixed inset-0 z-50 flex flex-col items-center justify-center bg-black p-10">
        <button onclick="backToMain()" class="absolute top-8 left-8 text-zinc-500 hover:text-blue-400 text-2xl underline uppercase">[ ESC: BACK ]</button>
        <h2 id="league-title" class="text-7xl text-white mb-8 italic border-b-4 border-blue-500 px-4 uppercase">LEAGUE</h2>
        <div class="flex flex-col gap-4 w-full max-w-md mb-12">
            <button onclick="startGame(0.08, 12)" class="border-4 border-zinc-800 bg-black text-zinc-300 p-4 text-2xl hover:border-blue-400 transition-all">LVL 01: CAUTIOUS</button>
            <button onclick="startGame(0.14, 16)" class="border-4 border-zinc-800 bg-black text-orange-400 p-4 text-2xl hover:border-orange-400 transition-all">LVL 02: STRIKER</button>
            <button onclick="startGame(0.22, 22)" class="border-4 border-zinc-800 bg-black text-red-600 p-4 text-2xl hover:border-red-600 transition-all">LVL 03: RELENTLESS</button>
        </div>
        <div class="signature-mark text-lg">LEAGUE OPERATOR: ASHMIT KHATUA</div>
    </div>
    <div id="game-ui" class="hidden relative flex flex-col items-center">
        <div class="flex items-center gap-8 mb-4 w-full justify-between px-4 bg-zinc-900/40 p-2 border-b-2 border-zinc-800">
            <div class="text-blue-400 text-xl uppercase font-bold">Target: <span id="target-display" class="text-white">11</span></div>
            <div class="signature-mark text-xs opacity-60"> // ASHMIT KHATUA</div>
            <div class="flex gap-6">
                <button id="music-btn" onclick="Sound.toggleMusic()" class="text-orange-400 hover:text-white uppercase text-sm">[ M: MUSIC ]</button>
                <button onclick="handlePauseToggle()" class="text-blue-400 hover:text-white uppercase text-sm">[ Space: Pause ]</button>
                <button onclick="requestQuit()" class="text-red-500 hover:text-white uppercase text-sm">[ Esc: Quit ]</button>
            </div>
        </div>
        <div class="relative">
            <canvas id="hockey" width="800" height="500" class="bg-black border-4 border-zinc-800"></canvas>      
            <div id="pauseOverlay" class="hidden absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-20">
                <h2 class="text-white text-8xl font-black italic mb-6 glitch uppercase">PAUSED</h2>
                <button onclick="handlePauseToggle()" class="border-4 border-white bg-black text-white px-12 py-3 text-2xl hover:bg-white hover:text-black transition-all">RESUME</button>
                <div class="mt-10 signature-mark text-sm">USER_SESSION: ASHMIT KHATUA</div>
            </div>
            <div id="quitOverlay" class="hidden absolute inset-0 bg-black/95 backdrop-blur-md flex flex-col items-center justify-center z-[100]">
                <h2 class="text-red-500 text-6xl font-black italic mb-2 uppercase glitch">TERMINATE SESSION?</h2>
                <p class="text-zinc-500 text-xl tracking-widest mb-10 uppercase">Current progress will be lost.</p>
                <div class="flex gap-8 mb-8">
                    <button onclick="confirmQuit(true)" class="border-4 border-red-600 text-red-600 px-12 py-3 text-3xl hover:bg-red-600 hover:text-black transition-all font-bold">YES [Y]</button>
                    <button onclick="confirmQuit(false)" class="border-4 border-zinc-400 text-zinc-400 px-12 py-3 text-3xl hover:bg-zinc-400 hover:text-black transition-all font-bold">NO [N]</button>
                </div>
                <div class="signature-mark text-xs">ADMIN: ASHMIT KHATUA</div>
            </div>
            <div id="gameOverOverlay" class="hidden absolute inset-0 bg-black/90 backdrop-blur-md flex flex-col items-center justify-center z-30">
                <h2 id="win-message" class="text-white text-7xl font-black italic mb-6 uppercase">YOU WIN</h2>
                <button onclick="requestSystemExit()" class="border-4 border-white bg-black text-white px-12 py-3 text-2xl hover:bg-white hover:text-black transition-all mb-8 uppercase">SHUTDOWN SYSTEM</button>
                <div class="signature-mark text-lg">PRODUCED BY ASHMIT KHATUA</div>
            </div>
        </div>
    </div>
    <div id="exit-confirm-overlay" class="hidden fixed inset-0 z-[200] flex flex-col items-center justify-center bg-black/98 backdrop-blur-xl p-10 text-center">
        <h2 class="text-red-600 text-7xl font-black italic mb-2 uppercase glitch">EXIT SYSTEM?</h2>
        <p class="text-zinc-400 text-2xl tracking-widest mb-12 uppercase">Are you sure you want to terminate the application?</p>
        <div class="flex gap-12 mb-20">
            <button onclick="shutdownSystem()" class="border-4 border-red-600 text-red-600 px-16 py-4 text-4xl hover:bg-red-600 hover:text-black transition-all font-bold">EXIT</button>
            <button onclick="cancelSystemExit()" class="border-4 border-zinc-500 text-zinc-500 px-16 py-4 text-4xl hover:bg-zinc-500 hover:text-black transition-all font-bold">STAY</button>
        </div>
        <div class="signature-mark text-xl border-t border-zinc-800 pt-4">ASHMIT KHATUA // FINAL LOGOUT</div>
    </div>
    <script>
        window.addEventListener('load', () => {
            setTimeout(() => {
                const intro = document.getElementById('intro-screen');
                if (intro) intro.style.display = 'none';
            }, 3300); 
        });
        const CONFIG = { winningScore: 11, masterVolume: 0.5 };
        const Sound = {
            ctx: null, bgMusic: null, isMuted: false,
            init() { if (!this.ctx) { this.ctx = new (window.AudioContext || window.webkitAudioContext)(); this.setupMusic(); } },
            setupMusic() {
                this.bgMusic = new Audio('https://cdn.pixabay.com/audio/2022/10/25/audio_5c99368d41.mp3');
                this.bgMusic.loop = true; this.bgMusic.volume = 0.3 * CONFIG.masterVolume;
            },
            toggleMusic() {
                if (!this.bgMusic) return;
                this.isMuted = !this.isMuted;
                const btn = document.getElementById('music-btn');
                btn.style.color = this.isMuted ? "#52525b" : "#fb923c";
                this.isMuted ? this.bgMusic.pause() : this.bgMusic.play().catch(() => {});
                this.play(600, 'sine', 0.05, 0.04);
            },
            play(freq, type, duration, vol = 0.1) {
                if (!this.ctx || this.isMuted) return;
                const osc = this.ctx.createOscillator(); const gain = this.ctx.createGain();
                osc.type = type; osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                gain.gain.setValueAtTime(vol * CONFIG.masterVolume, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + duration);
                osc.connect(gain); gain.connect(this.ctx.destination);
                osc.start(); osc.stop(this.ctx.currentTime + duration);
            }
        };
        const canvas = document.getElementById("hockey");
        const ctx = canvas.getContext("2d");
        let gameActive = false, gamePaused = false, scoreGapActive = false, quitPending = false;
        let mouseX = 400, mouseY = 250, scoreGlitch = 0;
        let aiBaseSpeed = 0.1, aiPower = 15;
        let puckLastX = 400, puckLastY = 250, stuckTimer = 0;

        const puck = { x: 400, y: 250, radius: 15, vx: 0, vy: 0, friction: 0.985 };
        const user = { x: 100, y: 250, radius: 35, score: 0 };
        const com = { x: 700, y: 250, radius: 35, score: 0 };

        function toggleSettings(show) { document.getElementById('settings-menu').classList.toggle('hidden', !show); updateBtnStates(); }
        function updateVolume(val) { CONFIG.masterVolume = val; if (Sound.bgMusic) Sound.bgMusic.volume = 0.3 * val; }
        function setWinLimit(limit) { CONFIG.winningScore = limit; updateBtnStates(); Sound.play(800, 'sine', 0.05, 0.1); }
        function updateBtnStates() {
            document.querySelectorAll('.limit-btn').forEach(btn => {
                const isActive = parseInt(btn.innerText) === CONFIG.winningScore;
                btn.style.borderColor = isActive ? "var(--neon-blue)" : "#3f3f46";
                btn.style.color = isActive ? "var(--neon-blue)" : "white";
            });
        }
        function showSubMenu(league) { 
            Sound.init(); 
            document.getElementById('main-menu').classList.add('hidden'); 
            document.getElementById('sub-menu').classList.remove('hidden'); 
            document.getElementById('league-title').innerText = league;
        }
        function backToMain() { document.getElementById('sub-menu').classList.add('hidden'); document.getElementById('main-menu').classList.remove('hidden'); }
        function startGame(speed, power) {
            aiBaseSpeed = speed; aiPower = power;
            user.score = 0; com.score = 0;
            document.getElementById('target-display').innerText = CONFIG.winningScore;
            document.getElementById('sub-menu').classList.add('hidden');
            document.getElementById('game-ui').classList.remove('hidden');
            document.getElementById('gameOverOverlay').classList.add('hidden');
            document.getElementById('quitOverlay').classList.add('hidden');
            gameActive = true; 
            gamePaused = false;
            quitPending = false;
            resetPuck(); 
            requestAnimationFrame(loop);
        }
        function requestSystemExit() {
            document.getElementById('exit-confirm-overlay').classList.remove('hidden');
            Sound.play(200, 'sawtooth', 0.1, 0.1);
        }
        function cancelSystemExit() {
            document.getElementById('exit-confirm-overlay').classList.add('hidden');
            Sound.play(600, 'sine', 0.05, 0.1);
        }
        function shutdownSystem() {
            document.body.innerHTML = `
                <div style="background:black; color:#00f2ff; height:100vh; width:100vw; display:flex; flex-direction:column; align-items:center; justify-content:center; font-family:monospace; text-transform:uppercase; letter-spacing:5px;">
                    <p class="glitch">TERMINATING SESSION...</p>
                    <p style="color:#ff0055;">SHUTDOWN COMPLETE.</p>
                    <p style="margin-top:20px; font-size:14px; opacity:0.8;">AUTHENTICATED BY ASHMIT KHATUA</p>
                    <p style="margin-top:5px; font-size:10px; opacity:0.3;">(You may now close this tab)</p>
                </div>
            `;
            setTimeout(() => {
                window.location.href = "about:blank";
                window.close();
            }, 1800);
        }
        function requestQuit() {
            if (!gameActive) return;
            quitPending = true;
            gamePaused = true; 
            document.getElementById('quitOverlay').classList.remove('hidden');
            Sound.play(200, 'sawtooth', 0.1, 0.1);
        }
        function confirmQuit(shouldQuit) {
            document.getElementById('quitOverlay').classList.add('hidden');
            quitPending = false;
            if (shouldQuit) {
                gameActive = false;
                document.getElementById('game-ui').classList.add('hidden');
                document.getElementById('main-menu').classList.remove('hidden');
            } else {
                gamePaused = false; 
                Sound.play(600, 'sine', 0.1, 0.1);
            }
        }
        function handlePauseToggle() { 
            if (gameActive && !quitPending) { 
                gamePaused = !gamePaused; 
                document.getElementById('pauseOverlay').classList.toggle('hidden', !gamePaused); 
            } 
        }
        window.addEventListener("keydown", (e) => {
            if (e.key.toLowerCase() === 'f') {
                if (!document.fullscreenElement) document.documentElement.requestFullscreen().catch(() => {});
                else if (document.exitFullscreen) document.exitFullscreen();
            }
            if (e.code === "Space") { e.preventDefault(); handlePauseToggle(); }
            if (e.code === "Escape") {
                if (quitPending) confirmQuit(false);
                else if (gameActive) requestQuit();
                else if (!document.getElementById('exit-confirm-overlay').classList.contains('hidden')) cancelSystemExit();
            }
        });
        canvas.addEventListener("mousemove", (e) => {
            let rect = canvas.getBoundingClientRect();
            mouseX = (e.clientX - rect.left) * (canvas.width / rect.width);
            mouseY = (e.clientY - rect.top) * (canvas.height / rect.height);
        });
        function resetPuck() { 
            scoreGapActive = true; scoreGlitch = 30; stuckTimer = 0;
            puck.x = 400; puck.y = 250; puck.vx = 0; puck.vy = 0; 
            setTimeout(() => scoreGapActive = false, 800); 
        }
        function update() {
            if (gamePaused || scoreGapActive || !gameActive) return;
            if (scoreGlitch > 0) scoreGlitch--;
            let moveDist = Math.sqrt(Math.pow(puck.x - puckLastX, 2) + Math.pow(puck.y - puckLastY, 2));
            if (moveDist < 0.3) {
                stuckTimer++;
                if (stuckTimer === 120) {
                    resetPuck();
                }
            } else { stuckTimer = 0; }
            puckLastX = puck.x; puckLastY = puck.y;
            user.x += (Math.max(user.radius, Math.min(canvas.width/2 - user.radius, mouseX)) - user.x) * 0.45;
            user.y += (Math.max(user.radius, Math.min(canvas.height - user.radius, mouseY)) - user.y) * 0.45;
            let targetX = 720, targetY = canvas.height / 2;
            if (puck.x > canvas.width/2) { targetX = puck.x; targetY = puck.y; }
            com.x += (targetX - com.x) * aiBaseSpeed;
            com.y += (targetY - com.y) * aiBaseSpeed;
            com.x = Math.max(canvas.width/2 + com.radius, Math.min(canvas.width - com.radius, com.x));
            puck.x += puck.vx; puck.y += puck.vy;
            puck.vx *= puck.friction; puck.vy *= puck.friction;
            const gS = 180, gT = (canvas.height - gS) / 2, gB = gT + gS;
            if (puck.y <= puck.radius || puck.y >= canvas.height - puck.radius) { 
                puck.vy *= -1; Sound.play(100, 'sine', 0.1); 
                puck.y = puck.y <= puck.radius ? puck.radius : canvas.height - puck.radius;
            }
            if (puck.x <= puck.radius) {
                if (puck.y > gT && puck.y < gB) { com.score++; resetPuck(); checkWin(); }
                else { puck.x = puck.radius; puck.vx *= -1; Sound.play(100, 'sine', 0.1); }
            } else if (puck.x >= canvas.width - puck.radius) {
                if (puck.y > gT && puck.y < gB) { user.score++; resetPuck(); checkWin(); }
                else { puck.x = canvas.width - puck.radius; puck.vx *= -1; Sound.play(100, 'sine', 0.1); }
            }
            [user, com].forEach(p => {
                let dx = puck.x - p.x, dy = puck.y - p.y, dist = Math.sqrt(dx*dx + dy*dy);
                if (dist < puck.radius + p.radius) {
                    Sound.play(180, 'square', 0.1, 0.08);
                    let angle = Math.atan2(dy, dx);
                    puck.x = p.x + Math.cos(angle) * (puck.radius + p.radius + 1);
                    puck.y = p.y + Math.sin(angle) * (puck.radius + p.radius + 1);
                    puck.vx = Math.cos(angle) * aiPower;
                    puck.vy = Math.sin(angle) * aiPower;
                }
            });
        }
        function checkWin() {
            if (user.score >= CONFIG.winningScore || com.score >= CONFIG.winningScore) {
                gameActive = false;
                const msg = document.getElementById('win-message');
                msg.innerText = user.score >= CONFIG.winningScore ? "SYSTEM BREACHED" : "OPPONENT SECURED";
                msg.style.color = user.score >= CONFIG.winningScore ? "#00f2ff" : "#ff0055";
                document.getElementById('gameOverOverlay').classList.remove('hidden');
            }
        }
        function render() {
            ctx.fillStyle = "black"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            const gS = 180, gT = (canvas.height - gS) / 2;
            const drawG = (x, color) => {
                ctx.strokeStyle = color; ctx.lineWidth = 6; ctx.shadowBlur = 15; ctx.shadowColor = color;
                ctx.beginPath();
                ctx.moveTo(x, gT); ctx.lineTo(x + (x === 0 ? 25 : -25), gT);
                ctx.moveTo(x, gT + gS); ctx.lineTo(x + (x === 0 ? 25 : -25), gT + gS);
                ctx.stroke(); ctx.shadowBlur = 0;
            };
            drawG(0, "#00f2ff"); drawG(canvas.width, "#ff0055");
            ctx.font = "bold 280px VT323"; ctx.textAlign = "center"; ctx.textBaseline = "middle";
            let shake = scoreGlitch > 0 ? (Math.random()-0.5)*10 : 0;
            ctx.fillStyle = `rgba(0, 242, 255, ${scoreGlitch > 0 ? 0.3 : 0.1})`;
            ctx.fillText(user.score, 200 + shake, canvas.height/2);
            ctx.fillStyle = `rgba(255, 0, 85, ${scoreGlitch > 0 ? 0.3 : 0.1})`;
            ctx.fillText(com.score, 600 + shake, canvas.height/2);
            ctx.strokeStyle = "#1a1a1a"; ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(canvas.width/2, 0); ctx.lineTo(canvas.width/2, canvas.height); ctx.stroke();
            const drawO = (x, y, r, color) => {
                ctx.shadowBlur = 20; ctx.shadowColor = color; ctx.fillStyle = color;
                ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2); ctx.fill();
            };
            drawO(user.x, user.y, user.radius, "#00f2ff");
            drawO(com.x, com.y, com.radius, "#ff0055");
            drawO(puck.x, puck.y, puck.radius, "#fff");
        }
        function loop() { if(gameActive) { update(); render(); requestAnimationFrame(loop); } }
        updateBtnStates();
    </script>
</body>
</html>